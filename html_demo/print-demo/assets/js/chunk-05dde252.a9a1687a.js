(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05dde252"],{"20b6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hospitalOurEditPage"},[r("title-common",[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("本院信息")])]),r("panel-common",[r("div",{attrs:{slot:"info-title"},slot:"info-title"},[e._v("基本信息")]),r("div",{staticClass:"info-content-container",attrs:{slot:"info-content"},slot:"info-content"},[r("el-form",{ref:"ourFormRef",attrs:{model:e.ourForm,"label-width":"80px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("i",{staticClass:"color-red"},[e._v("*")]),r("span",{staticClass:"label"},[e._v("医院名称 ")]),r("el-input",{attrs:{clearable:""},model:{value:e.ourDefaultInfo.hosname,callback:function(t){e.$set(e.ourDefaultInfo,"hosname",t)},expression:"ourDefaultInfo.hosname"}})],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"医院电话"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ourDefaultInfo.hostel,callback:function(t){e.$set(e.ourDefaultInfo,"hostel",t)},expression:"ourDefaultInfo.hostel"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("i",{staticClass:"color-red"},[e._v("*")]),r("span",{staticClass:"label"},[e._v("所在地区")]),r("el-select",{attrs:{placeholder:""},on:{change:function(t){return e._getCity(e.ourDefaultInfo.province)}},model:{value:e.ourDefaultInfo.province,callback:function(t){e.$set(e.ourDefaultInfo,"province",t)},expression:"ourDefaultInfo.province"}},e._l(e.prolist,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),r("el-select",{attrs:{placeholder:""},on:{change:function(t){return e._getArea(e.ourDefaultInfo.city)}},model:{value:e.ourDefaultInfo.city,callback:function(t){e.$set(e.ourDefaultInfo,"city",t)},expression:"ourDefaultInfo.city"}},e._l(e.citylist,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),r("el-select",{attrs:{placeholder:""},model:{value:e.ourDefaultInfo.county,callback:function(t){e.$set(e.ourDefaultInfo,"county",t)},expression:"ourDefaultInfo.county"}},e._l(e.arealist,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-col",{attrs:{span:12}},[r("i",{staticClass:"color-red"},[e._v("*")]),r("span",{staticClass:"label"},[e._v("详细地址")]),r("el-input",{attrs:{clearable:""},model:{value:e.ourDefaultInfo.hos_address,callback:function(t){e.$set(e.ourDefaultInfo,"hos_address",t)},expression:"ourDefaultInfo.hos_address"}})],1),r("el-col",{staticClass:"Mg-T20 Mg-B10",attrs:{span:12}},[r("i",{staticClass:"color-red"},[e._v("*")]),r("span",{staticClass:"label"},[e._v("医院类型")]),r("el-select",{staticClass:"select",attrs:{placeholder:""},model:{value:e.ourDefaultInfo.hos_type_id,callback:function(t){e.$set(e.ourDefaultInfo,"hos_type_id",t)},expression:"ourDefaultInfo.hos_type_id"}},e._l(e.hospitalType,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-col",{staticClass:"Mg-T20",attrs:{span:12}},[r("i",{staticClass:"color-red"},[e._v("*")]),r("span",{staticClass:"label"},[e._v("医院等级")]),r("el-select",{staticClass:"select",attrs:{placeholder:""},model:{value:e.ourDefaultInfo.hos_grade_id,callback:function(t){e.$set(e.ourDefaultInfo,"hos_grade_id",t)},expression:"ourDefaultInfo.hos_grade_id"}},e._l(e.hospitalLevel,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",[r("el-form-item",{attrs:{label:"医院照片"}},[r("div",{staticClass:"upload-img"},[r("div",[r("ol",[e._l(e.hospitalPic1,(function(t,o){return r("li",{key:o+"_1",staticClass:"Mg-R20"},[r("img",{attrs:{src:t.img,alt:""}}),r("span",{on:{click:function(a){return e.handleDelPic1(t.id)}}},[r("img",{attrs:{src:a("a308"),alt:""}})])])})),r("li",{directives:[{name:"show",rawName:"v-show",value:e.hospitalPic1.length<3,expression:"hospitalPic1.length < 3"}]},[r("input",{attrs:{type:"file",id:"signature1",accept:"image/jpeg, image/jpg, image/png"},on:{change:e.changePic1}}),r("label",{staticClass:"label-k",attrs:{for:"signature1"}}),r("p",{staticClass:"click"},[e._v("点击上传")])])],2)])])])],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"公交线路"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.ourDefaultInfo.bus_route,callback:function(t){e.$set(e.ourDefaultInfo,"bus_route",t)},expression:"ourDefaultInfo.bus_route"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"医院简介"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.ourDefaultInfo.introduction,callback:function(t){e.$set(e.ourDefaultInfo,"introduction",t)},expression:"ourDefaultInfo.introduction"}})],1)],1)],1)],1)],1)]),r("panel-common",[r("div",{attrs:{slot:"info-title"},slot:"info-title"},[e._v("平台修改")]),r("div",{staticClass:"info-content-container",attrs:{slot:"info-content"},slot:"info-content"},[r("el-form",{ref:"ourFormRef",attrs:{model:e.ourForm,"label-width":"80px"}},[r("el-row",[r("el-col",[r("el-form-item",{attrs:{label:"上传医院logo","label-width":"120px"}},[r("div",{staticClass:"upload-img-logo"},[r("div",[r("ol",[e._l(e.hospitalPic2,(function(t,o){return r("li",{key:o+"_2"},[r("img",{attrs:{src:t.img,alt:""}}),r("span",{on:{click:function(a){return e.handleDelPic2(t.id)}}},[r("img",{attrs:{src:a("a308"),alt:""}})])])})),r("li",{directives:[{name:"show",rawName:"v-show",value:e.hospitalPic2.length<1,expression:"hospitalPic2.length < 1"}]},[r("input",{attrs:{type:"file",id:"signature222",accept:"image/jpeg, image/jpg, image/png"},on:{change:e.changePic2}}),r("label",{staticClass:"label-logo",attrs:{for:"signature222"}}),r("p",{staticClass:"click"},[e._v("点击上传")])])],2)])])])],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"ourFormRef",attrs:{model:e.ourForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"修改平台名称"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ourDefaultInfo.terrace_name,callback:function(t){e.$set(e.ourDefaultInfo,"terrace_name",t)},expression:"ourDefaultInfo.terrace_name"}})],1)],1)],1)],1)],1)],1)]),r("panel-common",[r("div",{attrs:{slot:"info-title"},slot:"info-title"},[e._v("认证信息")]),r("div",{staticClass:"info-content-container",attrs:{slot:"info-content"},slot:"info-content"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form",{ref:"ourFormRef",staticClass:"idInfo",attrs:{model:e.ourForm,"label-width":"80px"}},[r("i",{staticClass:"color-red"},[e._v("*")]),r("el-form-item",{attrs:{label:"营业执照"}},[r("div",{staticClass:"upload-img"},[r("div",[r("ol",[e._l(e.hospitalPic4,(function(t,o){return r("li",{key:o+"_4"},[r("img",{attrs:{src:t.img,alt:""}}),r("span",{on:{click:function(a){return e.handleDelPic4(t.id)}}},[r("img",{attrs:{src:a("a308"),alt:""}})])])})),r("li",{directives:[{name:"show",rawName:"v-show",value:e.hospitalPic4.length<1,expression:"hospitalPic4.length < 1"}]},[r("input",{attrs:{type:"file",id:"signature30",accept:"image/jpeg, image/jpg, image/png"},on:{change:e.changePic4}}),r("label",{staticClass:"label-k",attrs:{for:"signature30"}}),r("p",{staticClass:"click"},[e._v("点击上传")])])],2)])])])],1)],1),r("el-col",{attrs:{span:16}},[r("el-form",{ref:"ourFormRef",staticClass:"idInfo",attrs:{model:e.ourForm,"label-width":"180px"}},[r("i",{staticClass:"color-red"},[e._v("*")]),r("el-form-item",{attrs:{label:"医疗机构执业许可证书"}},[r("div",{staticClass:"upload-img"},[r("div",[r("ol",[e._l(e.hospitalPic3,(function(t,o){return r("li",{key:o+"_3"},[r("img",{attrs:{src:t.img,alt:""}}),r("span",{on:{click:function(a){return e.handleDelPic3(t.id)}}},[r("img",{attrs:{src:a("a308"),alt:""}})])])})),r("li",{directives:[{name:"show",rawName:"v-show",value:e.hospitalPic3.length<1,expression:"hospitalPic3.length < 1"}]},[r("input",{attrs:{type:"file",id:"signature3",accept:"image/jpeg, image/jpg, image/png"},on:{change:e.changePic3}}),r("label",{staticClass:"label-k",attrs:{for:"signature3"}}),r("p",{staticClass:"click"},[e._v("点击上传")])])],2)])])])],1)],1)],1)],1)]),r("div",{staticClass:"btns"},[r("el-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e._ourSaveEdit}},[e._v("保存")]),r("el-button",{attrs:{plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)},o=[],n=(a("dbb3"),a("9302"),a("2eeb"),a("e35a"),a("0d7a"),a("e793")),i=(a("6a61"),a("cf7f")),s=a("a041"),l=a("2a94"),c=a("7584"),u={data:function(){return{ourForm:{},hospitalType:[],hospitalLevel:[],ourDefaultInfo:{},hospitalPic1:[],hospitalPic2:[],hospitalPic3:[],hospitalPic4:[],prolist:[],citylist:[],arealist:[],del_pic:[],isLoading:!1}},components:{TitleCommon:s["a"],PanelCommon:l["a"]},created:function(){this._getShowEdit(),this._getDefaultInfo(),this._getPro()},methods:{_getShowEdit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["p"])();case 2:a=t.sent,r=a.data,0!==r.code?e.$message.error(r.msg):(e.hospitalType=r.data.hos_type,e.hospitalLevel=r.data.hos_grade);case 6:case"end":return t.stop()}}),t)})))()},_getPro:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["t"])();case 2:a=t.sent,r=a.data,0!==r.code?e.$message.error("获取省数据失败！"):e.prolist=r.data;case 6:case"end":return t.stop()}}),t)})))()},_getCity:function(e){var t=arguments,a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var o,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:1,e){r.next=3;break}return r.abrupt("return");case 3:return 1==o&&(a.ourDefaultInfo.city="",a.ourDefaultInfo.county="",a.arealist=[]),r.next=6,Object(c["s"])({id:e});case 6:n=r.sent,i=n.data,0!==i.code?a.$message.error("获取市数据失败！"):a.citylist=i.data;case 10:case"end":return r.stop()}}),r)})))()},_getArea:function(e){var t=arguments,a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var o,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:1,e){r.next=3;break}return r.abrupt("return");case 3:return 1==o&&(a.ourDefaultInfo.county=""),r.next=6,Object(c["s"])({id:e});case 6:n=r.sent,i=n.data,0!==i.code?a.$message.error("获取区数据失败！"):a.arealist=i.data;case 10:case"end":return r.stop()}}),r)})))()},_getDefaultInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["o"])();case 2:a=t.sent,r=a.data,0!==r.code?3006==r.code?e.$message.error(r.msg):e.$message.error("获取本院修改信息默认数据失败！"):(e.ourDefaultInfo=Object(n["a"])({},r.data),e._getCity(r.data.province,2),e._getArea(r.data.city,2),r.data.pic&&(o=r.data.pic.split(","),o.map((function(t){var a=Math.random()*Math.random()*1e3;e.hospitalPic1.push({img:t,id:a})}))),r.data.logo&&e.hospitalPic2.push({img:r.data.logo}),r.data.yyimg&&e.hospitalPic4.push({img:r.data.yyimg}),r.data.ylimg&&e.hospitalPic3.push({img:r.data.ylimg}));case 6:case"end":return t.stop()}}),t)})))()},_ourSaveEdit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.ourDefaultInfo.hosname){t.next=4;break}return e.$message.error("请完善医院名称"),t.abrupt("return");case 4:if(e.ourDefaultInfo.province){t.next=7;break}return e.$message.error("请完善所在地区"),t.abrupt("return");case 7:if(e.ourDefaultInfo.hos_address){t.next=10;break}return e.$message.error("请完善详细地址"),t.abrupt("return");case 10:if(e.ourDefaultInfo.hos_type_id){t.next=13;break}return e.$message.error("请完善医院类型"),t.abrupt("return");case 13:if(e.ourDefaultInfo.hos_grade_id){t.next=16;break}return e.$message.error("请完善医院等级"),t.abrupt("return");case 16:if(0!=e.hospitalPic4.length){t.next=19;break}return e.$message.error("请上传营业执照"),t.abrupt("return");case 19:if(0!=e.hospitalPic3.length){t.next=22;break}return e.$message.error("请上传许可证书"),t.abrupt("return");case 22:return e.isLoading=!0,a=new FormData,a.append("hid",e.ourDefaultInfo.hid),a.append("hosname",e.ourDefaultInfo.hosname),a.append("hostel",e.ourDefaultInfo.hostel),a.append("province",e.ourDefaultInfo.province),a.append("city",e.ourDefaultInfo.city),a.append("county",e.ourDefaultInfo.county),a.append("hos_address",e.ourDefaultInfo.hos_address),a.append("hos_type_id",e.ourDefaultInfo.hos_type_id||0),a.append("hos_grade_id",e.ourDefaultInfo.hos_grade_id||0),a.append("introduction",e.ourDefaultInfo.introduction),a.append("terrace_name",e.ourDefaultInfo.terrace_name),a.append("bus_route",e.ourDefaultInfo.bus_route),e.del_pic.length&&(r=e.del_pic.join(","),a.append("is_del_pic",r)),e.hospitalPic1.map((function(e){e.file&&a.append("pic1[]",e.file)})),e.hospitalPic2.map((function(e){e.file&&a.append("pic2",e.file)})),e.hospitalPic4.map((function(e){e.file&&a.append("pic3",e.file)})),e.hospitalPic3.map((function(e){e.file&&a.append("pic4",e.file)})),t.next=43,Object(c["r"])(a);case 43:o=t.sent,n=o.data,0!==n.code?(e.$message.error(n.msg),e.isLoading=!1):(e.$message.success("修改本院信息成功！"),n.data.terrace_name&&window.localStorage.setItem("terrace_name",n.data.terrace_name),n.data.logo&&window.localStorage.setItem("pic",n.data.logo),e.$store.commit("SET_LOGOANDNAME",{pic:n.data.logo,terrace_name:n.data.terrace_name}),e.$router.go(-1));case 47:case"end":return t.stop()}}),t)})))()},_saveEditName:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["q"])({terrace_name:e.ourDefaultInfo.terrace_name});case 2:a=t.sent,r=a.data,0!==r.code?e.$message.error(r.msg):e.$message.success("修改平台名称成功！");case 6:case"end":return t.stop()}}),t)})))()},handleDelPic1:function(e){var t=this;this.hospitalPic1=this.hospitalPic1.filter((function(a){return a.id==e&&t.del_pic.push(a.img),a.id!==e}))},changePic1:function(e){var t=e||window.event,a=t.target.files[0];if(a){var r=new FileReader;r.vue=this,r.readAsDataURL(a),r.onload=function(){var e={};e.id=1e4*Math.random(),e.img=this.result,e.file=a,this.vue.hospitalPic1.push(e)},t.target.value=""}},handleDelPic2:function(e){this.hospitalPic2=this.hospitalPic2.filter((function(t){return t.id!==e}))},changePic2:function(e){var t=e||window.event,a=t.target.files[0];if(a){var r=new FileReader;r.vue=this,r.readAsDataURL(a),r.onload=function(){var e={};e.id=1e4*Math.random(),e.img=this.result,e.file=a,this.vue.hospitalPic2.push(e)},t.target.value=""}},handleDelPic3:function(e){this.hospitalPic3=this.hospitalPic3.filter((function(t){return t.id!==e}))},changePic3:function(e){var t=e||window.event,a=t.target.files[0];if(a){var r=new FileReader;r.vue=this,r.readAsDataURL(a),r.onload=function(){var e={};e.id=1e4*Math.random(),e.img=this.result,e.file=a,this.vue.hospitalPic3.push(e)},t.target.value=""}},handleDelPic4:function(e){this.hospitalPic4=this.hospitalPic4.filter((function(t){return t.id!==e}))},changePic4:function(e){var t=e||window.event,a=t.target.files[0];if(a){var r=new FileReader;r.vue=this,r.readAsDataURL(a),r.onload=function(){var e={};e.id=1e4*Math.random(),e.img=this.result,e.file=a,this.vue.hospitalPic4.push(e)},t.target.value=""}}}},f=u,p=(a("6480"),a("9ca4")),d=Object(p["a"])(f,r,o,!1,null,"4f3d5e78",null);t["default"]=d.exports},6480:function(e,t,a){"use strict";var r=a("fd84"),o=a.n(r);o.a},8775:function(e,t,a){},a041:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{staticClass:"title"},[e._t("title")],2),e._t("tag")],2)},o=[],n=(a("f343"),a("9ca4")),i={},s=Object(n["a"])(i,r,o,!1,null,"2a454133",null);t["a"]=s.exports},a308:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADLklEQVRoQ+2ZPUwUQRTH/+/IFSZoc4kmtEe0UZqjonL3ElrFeDHRwlCQECONWIHyGajEBmJIKIiFJuaMxJZkd62ouAZpNNCSaHKNXGJxcM/M3nHecbs7M/chDmGbLfbNe+8372NmZwiGP2S4/7gAOOsIti0CbNtJEN0BcwrMPSDq8d/iIToA84H/JsqB+TO57n474FsC4MHBqzg+fopSaQjATU2HdhGLbaCra4U2N39qjq2KNwXAmUw38vlxMD8H0N2s8cq4AoheIZFYomy2oKtLG4At6x6I3oD5mq6xSHmiH2B+Qp73SUevMgAzE9LpKTBPi6zWMaIhyyCahePMERGrjFNyhDOZS8jn34I5o6K0ZRmiLBKJx5TN/pbpkgJUZv7DP3P+xGMB4TgPZJGQA9j2NJhnZDPRke9EM+S6s1G6IwH8ggU+djDnZdyiDu5HFXYoQKVV7rW928hcPv1ddKdEojesxYYDyFJnYAAYHgZ2doDVVaBY1HMtHgdGR4G+PmB9HdjaCh8fkUqBAP4KWyyKpT58kVpbA5LJstHtbWByUh1COL+wAPT3l8fv7wMjI1ETUEA8ngxasYMBbHsezC8ip3RsDBgSO4jKowpx2nkxfGMDWF6OjmAsNk+OM9WQYUGj2LK+Svc2QY7IIJoZ89fBXfK8W1IAf1fJvKeU0DoO6ciGGSfqPb2LbUghTqefoVRaUgIQQiqOqcioGIzFxslxXteKNgLY9jswP1TRV5WJclAI1RZsM0V/YojoPbnuo2gAy/IA3NYCCItELldWk0rpF3uwA1/I8yxZBL6B+bo2QBhErSJZkcuMEn0n170hi8BhSz8pIp0WF+tnXVgU0ZiYUF8rgmEK5HmXZQC/ANQJySam7ntnAQ7J866c+xQyvogNb6PnYCEzeyshKtzozZwPkE7PoVR6Gdk+/+vttOk/NH4UTP6l9AHK55/m/tRXitncY5WTApamktZGSVO41YMtPwrlQ11zjxYr9WDu4W41lUw+Xq/NXGMvOOogTL5iqgMRK/bR0RiY70oPwhob0Nld8gU1QyOvWTW7ekfEpTc0HbHaRqUXAG2czKZU/QEA0hRPJVVO8QAAAABJRU5ErkJggg=="},f343:function(e,t,a){"use strict";var r=a("8775"),o=a.n(r);o.a},fd84:function(e,t,a){}}]);