(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1dbb050"],{"029c":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wangeditor"},[s("div",[s("span",[t._v("检查所见")]),s("div",{ref:"editorElem",class:{diagnose:t.is_ie10},staticStyle:{"text-align":"left",display:"inline-block"}})]),s("div",[s("span",[t._v("诊断意见")]),s("div",{ref:"editorEle2",class:{diagnose:t.is_ie10},staticStyle:{"text-align":"left",display:"inline-block"}})])])},i=[],r=(s("9302"),s("e35a"),s("5e9f"),s("5572")),n={name:"Editor",props:["catchData","catchDatas2"],data:function(){return{editor:null,editorContent:"",editors2:null,editorContentVal:"",hosExam_see:[],hosImpression:[],is_ie10:!1}},mounted:function(){var t=this,e=window.wangEditor;try{this.editor=new e(this.$refs.editorElem),this.editors2=new e(this.$refs.editorEle2),this.editor.customConfig.onchange=function(e){if(t.editorContent=e,t.delHtmlTag(e)){var s=[];s.push(e),t.hosExam_see=s}else t.hosExam_see=[];t.catchData(t.editorContent)},this.editors2.customConfig.onchange=function(e){t.editorContentVal=e;var s=[];t.delHtmlTag(e)&&s.push(e),t.hosImpression=s,t.catchDatas2(t.editorContentVal)};var s=["fontName","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","undo","redo"];this.editor.customConfig.menus=s,this.editors2.customConfig.menus=s,this.editor.create(),this.editors2.create()}catch(a){}},methods:{delHtmlTag:function(t){return!!t&&t.replace(/<[^>]+>/g,"").replace(/&nbsp;/gi,"")},setHtml:function(t,e){if(t)if(t=Object(r["d"])(t),1==e)if(this.hosExam_see.length){this.hosExam_see.push(t);var s=this.hosExam_see.join("<p></p><br/>");this.editor.txt.html(s+"<p></p>"),this.catchData(s)}else{this.hosExam_see.push(t);s=this.hosExam_see.join("");this.editor.txt.html(s+"<p></p>"),this.catchData(s)}else if(this.$IE10)this.hosExam_see.push(t),this.editor.txt.html(t),this.catchData(t);else{var a=t;this.hosExam_see.push(a),this.editor.txt.html(a+"<p></p>"),this.catchData(a)}},setHtml2:function(t,e){if(t)if(t=Object(r["d"])(t),1==e)if(this.hosImpression.length){this.hosImpression.push(t);var s=this.hosImpression.join("<p></p><br/>");this.editors2.txt.html(s+"<p></p>"),this.catchDatas2(s)}else{this.hosImpression.push(t);s=this.hosImpression.join("");this.editors2.txt.html(s+"<p></p>"),this.catchDatas2(s)}else this.$IE10?(this.hosImpression.push(t),this.editors2.txt.html(t),this.catchDatas2(t)):(this.hosImpression.push(t),this.editors2.txt.html(t+"<p></p>"),this.catchDatas2(t))}}},o=n,l=(s("7753"),s("d51f"),s("9ca4")),c=Object(l["a"])(o,a,i,!1,null,"2e731a9c",null);e["a"]=c.exports},"67c0":function(t,e,s){},7753:function(t,e,s){"use strict";var a=s("67c0"),i=s.n(a);i.a},"9d26":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"imagePatientInfoPage",attrs:{"data-id":t.testR}},[s("el-card",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"card-title Mg-T20"},[t._v(" "+t._s(t.form.hospital_name)+" "),s("span",{staticClass:"Mg-L20"},[t._v(t._s(t.form.examine_type)+"检查报告单")])])])],1),s("el-row",[s("el-col",{staticClass:"Mg-T10"},[s("hr",{staticStyle:{"background-color":"#ddd",height:"1px",border:"none"}})])],1),s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"检查号"}},[s("span",{staticClass:"span"},[t._v(t._s(t.form.dcm_patient_id))])])],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"检查类别"}},[s("span",{staticClass:"span"},[t._v(t._s(t.form.examine_type))])])],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"检查时间"}},[s("span",{staticClass:"span"},[t._v(t._s(t._f("dateFormat")(t.form.examine_time)))])])],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{attrs:{clearable:""},model:{value:t.form.real_name,callback:function(e){t.$set(t.form,"real_name",e)},expression:"form.real_name"}})],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"性别"}},[s("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[s("el-radio",{staticClass:"span",attrs:{label:"M"}},[t._v("男")]),s("el-radio",{staticClass:"span",attrs:{label:"F"}},[t._v("女")])],1)],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"年龄"}},[s("el-input",{attrs:{clearable:""},model:{value:t.form.age,callback:function(e){t.$set(t.form,"age",e)},expression:"form.age"}})],1)],1),t._l(t.report_config,(function(e,a){return[1==e.type?s("el-col",{key:a,attrs:{span:8}},[s("el-form-item",{attrs:{label:e.name}},[s("el-input",{attrs:{clearable:""},model:{value:e.val,callback:function(s){t.$set(e,"val",s)},expression:"val.val"}})],1)],1):t._e(),4==e.type?s("el-col",{key:a,attrs:{span:8}},[s("el-form-item",{attrs:{label:e.name}},[s("el-radio-group",{model:{value:e.val,callback:function(s){t.$set(e,"val",s)},expression:"val.val"}},t._l(e.list,(function(e){return s("el-radio",{key:e.value,staticClass:"span",attrs:{label:Number(e.value)}},[t._v(t._s(e.key))])})),1)],1)],1):t._e(),5==e.type?s("el-col",{key:a,attrs:{span:8}},[s("el-form-item",{attrs:{label:e.name}},[s("select-input",{attrs:{val:e.val,list:e.list},on:{"update:val":function(s){return t.$set(e,"val",s)}}})],1)],1):t._e()]}))],2),s("el-row",[s("el-col",[s("hr",{staticStyle:{"background-color":"#ddd",height:"1px",border:"none"}})])],1),s("div",{staticClass:"Mg-T20"},[s("h-editor",{ref:"hEditors",attrs:{catchData:t.catchData,catchDatas2:t.catchDatas2}})],1)],1)],1),s("div",{staticClass:"btns Mg-T20"},[t.form.examine_status>1?s("el-button",{attrs:{plain:""},on:{click:t.handlePrint}},[t._v("打印")]):t._e(),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.form.examine_status>0&&t.form.examine_status<6,expression:"(form.examine_status > 0 && form.examine_status < 6)"}],attrs:{type:"primary",loading:t.isLoading,disabled:t.isLoading},on:{click:function(e){return t.handleSubmit(t.status)}}},[t._v(t._s(t.btnTxt))]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.form.examine_status||5==t.form.examine_status,expression:"form.examine_status == 2 || form.examine_status == 5"}],attrs:{plain:""},on:{click:function(e){return t.handleSubmit(4)}}},[t._v("审核驳回")]),s("el-button",{attrs:{plain:""},on:{click:t.back}},[t._v("返回")])],1)],1)},i=[],r=(s("dbb3"),s("053b"),s("e18c"),s("e35a"),s("5e9f"),s("e793")),n=(s("6a61"),s("cf7f")),o=s("2a94"),l=s("029c"),c=s("1103"),h={props:{hosInfo:{type:Object},report_config:{type:Array,default:function(){return[]}}},components:{PanelCommon:o["a"],HEditor:l["a"],"select-input":function(){return s.e("chunk-2d0bd632").then(s.bind(null,"2c7b"))}},data:function(){return{activeName:"2",form:{dcm_patient_id:"",examine_type:"",examine_time:"",real_name:"",sex:"",age:"",discipline:"",in_hos_number:"",inpatient_area:"",bed_number:"",phone:"",checkResult:"",scan_type:"",examine_part:""},btnTxt:"保存",status:2,isLoading:!1,doc_did:JSON.parse(this.$cookie.get("USERLOGIN")).did}},computed:{testR:function(){var t=this;return this.form=this.hosInfo,1==this.form.examine_status?(this.status=2,this.btnTxt="保存"):2==this.form.examine_status?(this.status=3,this.btnTxt="审核"):3==this.form.examine_status?(this.status=6,this.btnTxt="确认"):4==this.form.examine_status?(this.status=5,this.btnTxt="确认修改"):5==this.form.examine_status?(this.status=3,this.btnTxt="审核"):(this.status=2,this.btnTxt="保存"),this.$nextTick((function(){t.hosInfo&&(t.hosInfo.examine_see&&t.$refs.hEditors.setHtml(t.hosInfo.examine_see,2),t.hosInfo.impressive&&t.$refs.hEditors.setHtml2(t.hosInfo.impressive,2))})),this.hosInfo.id}},methods:{handleClick:function(t,e){0==t.index?this.$router.push("/home/imageOurReport/table/imagePatientInfoPage"):2==t.index&&this.$router.push("/home/imageOurReport/tab/tabMark")},back:function(){this.$router.push("/home/imageOurReport")},writeReport:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(c["l"])(t);case 3:a=s.sent,i=a.data,0==i.code?(e.$message.success("提交成功！"),e.refresh(),e.isLoading=!1):(e.$message.error(i.msg),e.isLoading=!1),s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0);case 12:case"end":return s.stop()}}),s,null,[[0,9]])})))()},catchData:function(t){this.form.examine_see=t},catchDatas2:function(t){this.form.impressive=t},auditrRport:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(c["a"])(t);case 3:a=s.sent,i=a.data,0==i.code?(e.$message.success("提交成功！"),e.refresh(),e.isLoading=!1):e.$message.error(i.msg),s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0);case 11:case"end":return s.stop()}}),s,null,[[0,8]])})))()},handleReject:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(c["b"])(t);case 3:a=s.sent,i=a.data,0==i.code?(e.$message.success("提交成功！"),e.refresh(),e.isLoading=!1):e.$message.error(i.msg),s.next=10;break;case 8:s.prev=8,s.t0=s["catch"](0);case 10:case"end":return s.stop()}}),s,null,[[0,8]])})))()},delHtmlTag:function(t){return!!t&&t.replace(/<[^>]+>/g,"").replace(/&nbsp;/g,"").replace(/\s/g,"")},handleSubmit:function(t){if(this.form.real_name)if(this.form.sex)if(this.form.age){var e=this.report_config.filter((function(t){return 7!==t.type})),s=!1;if(e.length)for(var a=e,i=0;i<a.length;i++)if(1==a[i].status&&!a[i].val){this.$message.error("请输入"+a[i].name),s=!0;break}if(!s){var n=this.delHtmlTag(this.form.examine_see),o=this.delHtmlTag(this.form.impressive);if(n&&""!=n)if(o&&""!=o){this.isLoading=!1;var l={};for(var c in e)l[e[c].user]=e[c].val;var h=Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.form),l),{},{did:this.doc_did});this.$delete(h,"image_url"),this.$delete(h,"write"),this.$delete(h,"audit"),this.$delete(h,"query"),h.examine_status=t,4===t?this.auditrRport(h):2==t||5==t?this.writeReport(h):3==t?this.auditrRport(h):this.handleReject(h)}else this.$message.error("请完善诊断意见！");else this.$message.error("请完善检查所见！")}}else this.$message.error("请完善年龄");else this.$message.error("请选择性别");else this.$message.error("请完善姓名")},handlePrint:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["j"])();case 3:s=e.sent,a=s.data,0==a.code?t.$router.push("/home/imageOurReport/table/imagePrint?id="+t.$route.query.patientInfoId):t.$message.error(a.msg),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},refresh:function(){this.$emit("refresh")}}},m=h,u=(s("ff08"),s("9ca4")),f=Object(u["a"])(m,a,i,!1,null,"545325bf",null);e["default"]=f.exports},"9db2":function(t,e,s){},b88f:function(t,e,s){},d51f:function(t,e,s){"use strict";var a=s("b88f"),i=s.n(a);i.a},ff08:function(t,e,s){"use strict";var a=s("9db2"),i=s.n(a);i.a}}]);