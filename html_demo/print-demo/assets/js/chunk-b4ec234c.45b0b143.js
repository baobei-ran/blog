(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b4ec234c"],{"09b3":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"medicalCardEditPage"},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"120px"}},[r("panel-common",{staticClass:"panel-common"},[r("div",{attrs:{slot:"info-title"},slot:"info-title"},[e._v("编辑就诊人信息")]),r("div",{staticClass:"Mg-T20",attrs:{slot:"info-content"},slot:"info-content"},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"就诊人姓名："}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.real_name,callback:function(t){e.$set(e.form,"real_name",t)},expression:"form.real_name"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"证件号码："}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.id_card,callback:function(t){e.$set(e.form,"id_card",t)},expression:"form.id_card"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-row",[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"患者年龄：",prop:"age"}},[r("el-input",{attrs:{maxLength:"3"},on:{input:e.ageChange,blur:e.ageValue},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1)],1),r("el-col",{attrs:{span:4}},[r("el-input",{attrs:{disabled:""},model:{value:e.age_unit,callback:function(t){e.age_unit=t},expression:"age_unit"}})],1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"出生日期："}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.birth,callback:function(t){e.$set(e.form,"birth",t)},expression:"form.birth"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"性别："}},[r("el-select",{attrs:{placeholder:"",disabled:""},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.sexlist,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"手机号码："}},[r("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"就诊卡号："}},[r("el-input",{attrs:{disabled:2!==e.is_card_disabled},model:{value:e.form.medical_card,callback:function(t){e.$set(e.form,"medical_card",t)},expression:"form.medical_card"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"婚姻状况："}},[r("el-select",{attrs:{placeholder:""},model:{value:e.form.is_married,callback:function(t){e.$set(e.form,"is_married",t)},expression:"form.is_married"}},e._l(e.marrylist,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"地址："}},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-select",{attrs:{placeholder:""},on:{change:function(t){return e.getCity(e.form.province)}},model:{value:e.form.province,callback:function(t){e.$set(e.form,"province",t)},expression:"form.province"}},e._l(e.prolist,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-col",{attrs:{span:8}},[r("el-select",{attrs:{placeholder:""},on:{change:function(t){return e.getCountry(e.form.city)}},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}},e._l(e.citylist,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-col",{attrs:{span:8}},[r("el-select",{attrs:{placeholder:""},model:{value:e.form.county,callback:function(t){e.$set(e.form,"county",t)},expression:"form.county"}},e._l(e.countylist,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)],1),r("el-col",{attrs:{span:16}},[r("el-form-item",{attrs:{label:"详细地址："}},[r("el-input",{attrs:{maxlength:"255"},model:{value:e.form.detail_address,callback:function(t){e.$set(e.form,"detail_address",t)},expression:"form.detail_address"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"职业："}},[r("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{size:"medium","fetch-suggestions":e.searchOccupation,placeholder:"请输入职业"},on:{select:e.handleOccupation},model:{value:e.form.occupation,callback:function(t){e.$set(e.form,"occupation",t)},expression:"form.occupation"}})],1)],1),r("el-col",{attrs:{span:16}},[r("el-form-item",{attrs:{label:"工作单位："}},[r("el-input",{model:{value:e.form.organization,callback:function(t){e.$set(e.form,"organization",t)},expression:"form.organization"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"备注："}},[r("el-input",{attrs:{type:"textarea",placeholder:"请填写备注，输入内容不得超过60字",rows:2,maxlength:"60"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1)],1)])],1),r("div",{staticClass:"btns Mg-T20"},[r("el-button",{attrs:{plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")]),r("el-button",{attrs:{type:"primary",disabled:e.loading,loading:e.loading},on:{click:e.saveEditMedicalCard}},[e._v(" 保存 ")])],1)],1)},a=[],o=(r("dbb3"),r("ecb4"),r("77ad"),r("e35a"),r("5e9f"),r("bb21"),r("6a61"),r("cf7f")),i=r("2a94"),c=r("5572"),s=r("9f39"),l={data:function(){return{form:{real_name:"",id_card:"",age:"",birth:"",sex:"",phone:"",medical_card:"",is_married:"",province:"",city:"",county:"",detail_address:"",occupation:"",organization:"",desc:""},age_unit:"岁",sexlist:[{id:0,name:"保密"},{id:1,name:"男"},{id:2,name:"女"}],marrylist:[{id:1,name:"未婚"},{id:2,name:"已婚"},{id:3,name:"离异"},{id:4,name:"丧偶"}],prolist:[],citylist:[],countylist:[],formRules:{age:[{required:!0,message:"请输入患者年龄",trigger:"blur"}]},occupationlist:[{value:"工人"},{value:"农民"},{value:"职员"},{value:"干部"},{value:"技术员"},{value:"学生"},{value:"军人"},{value:"其他"}],loading:!1,id_card:null,id:null,is_card_disabled:null}},components:{PanelCommon:i["a"]},created:function(){this.id_card=this.$route.query.id_card,this.id=this.$route.query.id,this.showEditMedicalCard(),this.getPro()},methods:{showEditMedicalCard:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["w"])({id_card:e.id_card});case 3:if(r=t.sent,n=r.data,0===n.code){t.next=10;break}e.$message.error(n.msg),t.next=16;break;case 10:return e.is_card_disabled=n.data.is_his,t.next=13,e.getCity(n.data.province,2);case 13:return t.next=15,e.getCountry(n.data.city,2);case 15:e.form=n.data;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})))()},getPro:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["b"])();case 3:r=t.sent,n=r.data,0!==n.code?e.$message.error("获取省数据失败！"):e.prolist=n.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getCity:function(e){var t=arguments,r=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:1,e){n.next=3;break}return n.abrupt("return");case 3:return 1==a&&(r.form.city="",r.form.county="",r.countylist=[]),n.prev=4,n.next=7,Object(s["a"])({id:e});case 7:o=n.sent,i=o.data,0!==i.code?r.$message.error("获取市数据失败！"):r.citylist=i.data,n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](4);case 16:case"end":return n.stop()}}),n,null,[[4,13]])})))()},getCountry:function(e){var t=arguments,r=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:1,e){n.next=3;break}return n.abrupt("return");case 3:return 1==a&&(r.form.county=""),n.prev=4,n.next=7,Object(s["a"])({id:e});case 7:o=n.sent,i=o.data,0!==i.code?r.$message.error("获取区数据失败！"):r.countylist=i.data,n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](4);case 16:case"end":return n.stop()}}),n,null,[[4,13]])})))()},searchOccupation:function(e,t){var r=this.occupationlist,n=e?r.filter(this.createFilter(e)):r;t(n)},createFilter:function(e){return function(t){return t.value.indexOf(e)>-1}},handleOccupation:function(e){this.form.occupation=e.value},ageChange:function(){this.form.age=this.form.age.replace(/[^0-9]/g,"")},ageValue:function(){this.form.age&&this.form.age.startsWith("0")&&(this.form.age=this.form.age.slice(1))},saveEditMedicalCard:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.age){t.next=3;break}return e.$message.error("请输入患者年龄"),t.abrupt("return");case 3:if(e.form.phone){t.next=6;break}return e.$message.error("请输入手机号码"),t.abrupt("return");case 6:if(!e.form.phone||c["f"].test(e.form.phone)){t.next=9;break}return e.$message.error("请输入正确的手机号码"),t.abrupt("return");case 9:if(r=/(^[0-9a-zA-Z]+$)/,e.form.medical_card){t.next=13;break}return e.$message.error("请输入就诊卡号！"),t.abrupt("return");case 13:if(!e.form.medical_card||r.test(e.form.medical_card)){t.next=16;break}return e.$message.error("请输入正确的就诊卡号"),t.abrupt("return");case 16:return t.prev=16,t.next=19,Object(s["u"])({age:e.form.age,id_card:e.form.id_card,id:e.id,phone:e.form.phone,medical_card:e.form.medical_card,is_married:e.form.is_married,province:e.form.province,city:e.form.city,county:e.form.county,detail_address:e.form.detail_address,occupation:e.form.occupation,organization:e.form.organization,desc:e.form.desc});case 19:n=t.sent,a=n.data,0!==a.code?e.$message.error(a.msg):(e.$message.success("修改就诊人信息成功！"),e.$router.go(-1)),t.next=28;break;case 25:t.prev=25,t.t0=t["catch"](16);case 28:case"end":return t.stop()}}),t,null,[[16,25]])})))()}}},u=l,d=(r("2170"),r("9ca4")),f=Object(d["a"])(u,n,a,!1,null,"2ee05400",null);t["default"]=f.exports},2170:function(e,t,r){"use strict";var n=r("f8da"),a=r.n(n);a.a},"9f39":function(e,t,r){"use strict";r.d(t,"r",(function(){return a})),r.d(t,"j",(function(){return o})),r.d(t,"k",(function(){return i})),r.d(t,"m",(function(){return c})),r.d(t,"o",(function(){return s})),r.d(t,"p",(function(){return l})),r.d(t,"l",(function(){return u})),r.d(t,"q",(function(){return d})),r.d(t,"n",(function(){return f})),r.d(t,"e",(function(){return m})),r.d(t,"h",(function(){return p})),r.d(t,"g",(function(){return b})),r.d(t,"f",(function(){return g})),r.d(t,"t",(function(){return h})),r.d(t,"y",(function(){return v})),r.d(t,"i",(function(){return _})),r.d(t,"c",(function(){return x})),r.d(t,"x",(function(){return k})),r.d(t,"v",(function(){return y})),r.d(t,"s",(function(){return w})),r.d(t,"d",(function(){return O})),r.d(t,"w",(function(){return j})),r.d(t,"b",(function(){return $})),r.d(t,"a",(function(){return C})),r.d(t,"u",(function(){return R}));var n=r("bdd0"),a=function(e){return Object(n["a"])("post","/patientList",e)},o=function(e){return Object(n["a"])("post","/patientLists",e)},i=function(e){return Object(n["a"])("post","/patientDetail",e)},c=function(e){return Object(n["a"])("post","/figureImage",e)},s=function(e){return Object(n["a"])("post","/patientInquiryList",e)},l=function(e){return Object(n["a"])("post","/followLists",e)},u=function(e){return Object(n["a"])("post","/casePatientList",e)},d=function(e){return Object(n["a"])("post","/followDetail",e)},f=function(e){return Object(n["a"])("post","/ofReportImage",e)},m=function(e){return Object(n["a"])("post","/viewReport",e)},p=function(e){return Object(n["a"])("post","/followList",e)},b=function(e){return Object(n["a"])("post","/getPatients",e)},g=function(){return Object(n["a"])("get","/createFollow")},h=function(e){return Object(n["a"])("post","/createFollow",e)},v=function(e){return Object(n["a"])("get","/dealFollow",e)},_=function(e){return Object(n["a"])("post","/dealFollow",e)},x=function(e){return Object(n["a"])("post","/getFollowDetail",e)},k=function(e){return Object(n["a"])("get","/editFollow",e)},y=function(e){return Object(n["a"])("post","/editFollow",e)},w=function(e){return Object(n["a"])("post","/cancelFollow",e)},O=function(e){return Object(n["a"])("post","/patientIdCardList",e)},j=function(e){return Object(n["a"])("get","/editPatientInfo",e)},$=function(){return Object(n["a"])("post","/getAddress")},C=function(e){return Object(n["a"])("post","/getAddress",e)},R=function(e){return Object(n["a"])("post","/editPatientInfo",e)}},bb21:function(e,t,r){"use strict";var n=r("1c8b"),a=r("aa6b").f,o=r("d88d"),i=r("07a2"),c=r("2732"),s=r("783d"),l=r("9b9d"),u="".startsWith,d=Math.min,f=s("startsWith"),m=!l&&!f&&!!function(){var e=a(String.prototype,"startsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!m&&!f},{startsWith:function(e){var t=String(c(this));i(e);var r=o(d(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return u?u.call(t,n,r):t.slice(r,r+n.length)===n}})},f8da:function(e,t,r){}}]);