(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e6e2e72"],{1799:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next",total:e.total,"page-size":e.per_page,"current-page":e.current_page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],l=(a("513c"),{props:{current_page:{type:Number,default:1},per_page:{type:Number,default:10},total:{type:Number,default:0}},methods:{handleSizeChange:function(e){this.$emit("handleSizeChangeSon",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChangeSon",e)}}}),i=l,o=a("9ca4"),s=Object(o["a"])(i,n,r,!1,null,null,null);t["a"]=s.exports},"5f20":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"electronicMedicalList"},[a("el-card",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"病历类型"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.form.case_type_name,callback:function(t){e.$set(e.form,"case_type_name",t)},expression:"form.case_type_name"}},e._l(e.illTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.type,value:e.type}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"就诊人姓名"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.patient_name,callback:function(t){e.$set(e.form,"patient_name",t)},expression:"form.patient_name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"就诊人性别"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.sexlist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"就诊人年龄"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.min_age,callback:function(t){e.$set(e.form,"min_age",t)},expression:"form.min_age"}})],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.max_age,callback:function(t){e.$set(e.form,"max_age",t)},expression:"form.max_age"}})],1)],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"医生姓名"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.case_update_name,callback:function(t){e.$set(e.form,"case_update_name",t)},expression:"form.case_update_name"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"病历时间"}},[a("el-date-picker",{staticStyle:{width:"auto"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.onChnageDate},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)],1),a("el-col",{attrs:{span:5}},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:""},on:{click:e.resetPatientForm}},[e._v("重置")])],1)])],1)],1)],1),a("el-card",{staticClass:"Mg-T20"},[a("el-button",{attrs:{type:"primary"},on:{click:e._toAddPage}},[e._v(" 添加新病历 ")]),a("f-table",{staticClass:"Mg-T20",attrs:{"table-label":e.tableLabel,"table-data":e.tableData},scopedSlots:e._u([{key:"formatDate",fn:function(t){return[e._v(" "+e._s(e._f("allDateFormat")(t.data.case_create_time))+" ")]}},{key:"formatDateEdit",fn:function(t){return[a("span",[e._v(e._s(e._f("allDateFormat")(t.data.case_update_time)))])]}},{key:"sex",fn:function(t){return[2==t.data.sex?a("div",[e._v("女")]):1==t.data.sex?a("div",[e._v("男")]):e._e()]}},{key:"opt",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini",plain:""},on:{click:function(a){return e._toDetailPage(t.data.cid)}}},[e._v(" 查看 ")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",plain:""},on:{click:function(a){return e._toEditPage(t.data.cid)}}},[e._v(" 编辑 ")])]}}])}),a("pagination",{attrs:{total:e.total,current_page:e.form.page,per_page:e.form.limit},on:{handleSizeChangeSon:e.handleSizeChangeFather,handleCurrentChangeSon:e.handleCurrentChangeFather}})],1)],1)},r=[],l=(a("2eeb"),a("513c"),a("e35a"),a("5e9f"),a("6a61"),a("cf7f")),i=a("0748"),o=a("1799"),s=a("92ce"),c={data:function(){return{form:{name:"",case_type_name:"",patient_name:"",sex:"",min_age:"",max_age:"",case_update_name:"",start_time:"",end_time:"",page:1,limit:10},sexlist:[{id:1,name:"男"},{id:2,name:"女"}],dateRange:[],tableLabel:[{prop:"index",label:"序号"},{prop:"name",label:"病历名称"},{prop:"case_type_name",label:"病历类型"},{prop:"patient_name",label:"就诊人姓名",width:"100"},{prop:"sex",label:"性别",columnType:"slot",slotName:"sex"},{prop:"age",label:"年龄"},{prop:"case_create_name",label:"病历医生"},{prop:"case_create_time",label:"病历时间",columnType:"slot",slotName:"formatDate",width:"150"},{prop:"case_update_name",label:"修改医生"},{prop:"case_update_time",label:"修改时间",columnType:"slot",slotName:"formatDateEdit",width:"150"},{label:"操作",columnType:"slot",slotName:"opt",width:"200",fixed:"right"}],tableData:[],total:0,illTypeList:[]}},components:{FTable:i["a"],Pagination:o["a"]},created:function(){var e=this.$route.query.page;this.form.page=Number(e)||1,this._getElectronicListData()},methods:{onChnageDate:function(e){if(!e||!e.length)return e=[],this.form.start_time="",void(this.form.end_time="");e&&e.length&&(this.form.start_time=e[0],this.form.end_time=e[1])},_getElectronicListData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,Object(s["f"])(e.form);case 4:a=t.sent,n=a.data,0!==n.code?(e.tableData=[],e.total=0):(n.data.data.map((function(t,a){t.index=a+1+(e.form.page-1)*e.form.limit})),e.tableData=n.data.data,e.total=n.data.total||0,e.illTypeList=n.data.case_type_name_list),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})))()},handleSearch:function(){if(this.form.min_age&&this.form.max_age&&this.form.min_age>this.form.max_age){var e=this.form.min_age;this.form.min_age=this.form.max_age,this.form.max_age=e}this.form.page=1,this._getElectronicListData()},resetPatientForm:function(){this.$refs.form.resetFields(),this.form={name:"",case_type_name:"",patient_name:"",sex:"",min_age:"",max_age:"",case_update_name:"",start_time:"",end_time:"",page:1,limit:10},this.dateRange=[],this._getElectronicListData()},_toDetailPage:function(e){this.$isAuth("home/electronicList/ElectronicMedicalDetailPage")&&this.$router.push({path:"/home/electronicList/ElectronicMedicalDetailPage",query:{cid:e}})},_toAddPage:function(){this.$isAuth("home/electronicList/electronicMedicalAddPage")&&this.$router.push("/home/electronicList/electronicMedicalAddPage")},_toEditPage:function(e){this.$isAuth("home/electronicList/electronicMedicalEditPage")&&this.$router.push({path:"/home/electronicList/electronicMedicalEditPage",query:{cid:e}})},handleSizeChangeFather:function(e){this.form.limit=e,this._getElectronicListData()},handleCurrentChangeFather:function(e){this.form.page=e,this._getElectronicListData(),this.$router.replace("/home/electronicList?page="+e)}}},m=c,p=a("9ca4"),u=Object(p["a"])(m,n,r,!1,null,null,null);t["default"]=u.exports}}]);