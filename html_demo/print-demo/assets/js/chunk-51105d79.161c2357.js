(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51105d79"],{1799:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next",total:e.total,"page-size":e.per_page,"current-page":e.current_page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],n=(a("513c"),{props:{current_page:{type:Number,default:1},per_page:{type:Number,default:10},total:{type:Number,default:0}},methods:{handleSizeChange:function(e){this.$emit("handleSizeChangeSon",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChangeSon",e)}}}),i=n,l=a("9ca4"),s=Object(l["a"])(i,o,r,!1,null,null,null);t["a"]=s.exports},"748e":function(e,t,a){"use strict";var o=a("915d"),r=a.n(o);r.a},"915d":function(e,t,a){},f63c:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hospitalDoctor"},[a("el-card",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"医生姓名"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"所属科室"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.form.dep,callback:function(t){e.$set(e.form,"dep",t)},expression:"form.dep"}},e._l(e.depList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:""},on:{click:e.resetDoctorForm}},[e._v("重置")])],1)])],1)],1)],1),a("el-card",{staticClass:"table-card"},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:e._toHospitalDoctorAddPage}},[e._v("添加医生")]),a("f-table",{attrs:{"table-label":e.tableLabel,"table-data":e.tableData},scopedSlots:e._u([{key:"opt",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",plain:""},on:{click:function(a){return e._toHospitalDoctorEditPage(t.data.did)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-date",size:"mini",plain:""},on:{click:function(a){return e._HospitalDoctorWork(t.data.did,t.data)}}},[e._v("排班")]),a("el-button",{attrs:{type:"primary",icon:1==t.data.is_lock?"el-icon-remove-outline":"el-icon-circle-plus-outline",size:"mini",plain:""},on:{click:function(a){return e.stop(t.data)}}},[e._v(" "+e._s(1==t.data.is_lock?"停用":"启用"))]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete",size:"mini",plain:""},on:{click:function(a){return e._HospitalDoctorDelete(t.data.did)}}},[e._v("删除")])]}}])}),a("pagination",{attrs:{total:e.total,current_page:e.form.page,per_page:e.form.limit},on:{handleSizeChangeSon:e.handleSizeChangeFather,handleCurrentChangeSon:e.handleCurrentChangeFather}})],1),a("el-dialog",{directives:[{name:"drag",rawName:"v-drag"}],attrs:{title:"信息提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v("您还未添加科室，请先添加科室再添加医生！")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e._toAddRoomPage}},[e._v("添加科室")]),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)])],1)},r=[],n=(a("2eeb"),a("053b"),a("6a61"),a("cf7f")),i=a("0748"),l=a("1799"),s=a("7584"),c={data:function(){return{form:{name:"",phone:"",dep:"",page:1,limit:10},tableLabel:[{prop:"index",label:"序号",width:"50"},{prop:"name",label:"医生姓名"},{prop:"login_name",label:"登录名"},{prop:"phone",label:"医生手机"},{prop:"dep_name",label:"所属科室"},{prop:"title",label:"分配角色"},{label:"操作",columnType:"slot",slotName:"opt",width:"400"}],tableData:[],total:0,depList:[],dialogVisible:!1,RoomForm:{deskName:"",page:1,limit:10}}},components:{FTable:i["a"],Pagination:l["a"]},created:function(){this._getDoctorList()},methods:{handleSearch:function(){this.form.page=1,this._getDoctorList()},_getDoctorList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["c"])(e.form);case 2:a=t.sent,o=a.data,0!==o.code?(e.tableData=[],e.depList=[],e.total=0):(o.data.list.data.map((function(t,a){t.index=a+1+(e.form.page-1)*e.form.limit})),e.depList=o.data.dep,e.tableData=o.data.list.data,e.total=o.data.list.total);case 6:case"end":return t.stop()}}),t)})))()},resetDoctorForm:function(){this.$refs.form.resetFields(),this.form={name:"",phone:"",dep:"",page:1,limit:10},this._getDoctorList()},_toHospitalDoctorEditPage:function(e){this.$isAuth("home/hospitalDoctorEditPage")&&this.$router.push({path:"/home/hospitalDoctorEditPage",query:{did:e}})},_HospitalDoctorWork:function(e,t){this.$isAuth("home/doctorSchedulingPage")&&this.$router.push({path:"/home/doctorSchedulingPage",query:{schedulingInfoId:e,name:t.name}})},stop:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=3,Object(s["i"])({id:e.did,is_lock:2===e.is_lock?1:2});case 3:o=a.sent,r=o.data,0===r.code?(t.$message.success("修改状态成功！"),t._getDoctorList()):t.$message.error(r.msg);case 7:case"end":return a.stop()}}),a)})))()},_HospitalDoctorDelete:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.$isAuth("hospitalDoctorDelete")){a.next=13;break}return a.next=4,t.$confirm("此操作将永久删除该医生, 是否继续?","信息提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).catch((function(e){return e}));case 4:if(o=a.sent,"confirm"===o){a.next=7;break}return a.abrupt("return",t.$message({type:"info",message:"已取消删除"}));case 7:return a.next=9,Object(s["f"])({id:e});case 9:r=a.sent,n=r.data,0!==n.code?t.$message.error(n.msg):(t.$message.success("删除医生成功！"),t._getDoctorList());case 13:case"end":return a.stop()}}),a)})))()},_toHospitalDoctorAddPage:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$isAuth("home/hospitalDoctorAddPage")){t.next=7;break}return t.next=3,Object(s["F"])(e.RoomForm);case 3:a=t.sent,o=a.data,0!==o.code?3100==o.code?e.dialogVisible=!0:e.$message.error(o.msg):e.$router.push("/home/hospitalDoctorAddPage");case 7:case"end":return t.stop()}}),t)})))()},handleSizeChangeFather:function(e){this.form.limit=e,this._getDoctorList()},handleCurrentChangeFather:function(e){this.form.page=e,this._getDoctorList()},_toAddRoomPage:function(){this.dialogVisible=!1,this.$router.push("/home/hospitalRoom")}}},u=c,p=(a("748e"),a("9ca4")),d=Object(p["a"])(u,o,r,!1,null,"2d0d6c1e",null);t["default"]=d.exports}}]);