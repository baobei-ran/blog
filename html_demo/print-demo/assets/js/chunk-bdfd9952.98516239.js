(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bdfd9952"],{"055f":function(e,t,r){},"4f62":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hospitalRoleAddPage"},[r("title-common",[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("添加角色")])]),r("panel-common",[r("div",{attrs:{slot:"info-content"},slot:"info-content"},[r("el-form",{ref:"addRoleFormRef",attrs:{model:e.addRoleForm,rules:e.addRoleFormRules,"label-width":"100px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[r("el-input",{model:{value:e.addRoleForm.name,callback:function(t){e.$set(e.addRoleForm,"name",t)},expression:"addRoleForm.name"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"角色备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.addRoleForm.remark,callback:function(t){e.$set(e.addRoleForm,"remark",t)},expression:"addRoleForm.remark"}})],1)],1)],1)],1)],1)]),r("panel-common",[r("div",{attrs:{slot:"info-content"},slot:"info-content"},[r("i",{staticClass:"color-red"},[e._v("*")]),e._v(" 功能授权 "),r("el-tree",{ref:"tree",attrs:{data:e.rightTreeList,props:e.rightTreeConfig,accordion:"","show-checkbox":"","node-key":"id"}})],1)]),r("div",{staticClass:"btns"},[r("el-button",{attrs:{type:"primary",loading:e.loading,disabled:e.loading},on:{click:e._RoleAdd}},[e._v(" 保存 ")]),r("el-button",{attrs:{plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],1)},a=[],o=(r("9302"),r("2eeb"),r("053b"),r("6a61"),r("cf7f")),i=r("a041"),s=r("2a94"),c=r("7584"),l=r("85e8"),u={data:function(){return{addRoleForm:{name:"",remark:""},addRoleFormRules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},rightTreeList:[],rightTreeConfig:{children:"children",label:"label"},menuslist:[],arrlist:[],loading:!1}},components:{TitleCommon:i["a"],PanelCommon:s["a"]},created:function(){this._getRoleShow()},methods:{_getRoleShow:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["D"])();case 2:r=t.sent,n=r.data,0!==n.code?e.$message.error(n.msg):e.rightTreeList=n.data;case 6:case"end":return t.stop()}}),t)})))()},getTreeNum:function(e,t){e.id&&t.push(e.id),e.children&&e.children.length&&this.getTreeNum(e.children,t)},_RoleAdd:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.addRoleForm.name){t.next=3;break}return e.$message.error("请完善角色名称"),t.abrupt("return");case 3:if(r=e.$refs.tree.getHalfCheckedNodes(),n=e.$refs.tree.getCheckedNodes(),n.length){t.next=8;break}return e.$message.error("请选择功能授权"),t.abrupt("return");case 8:return a=[],r.map((function(t){t.id&&a.push(t.id),t.children&&t.children.length&&e.getTreeNum(t.children,a)})),n.map((function(t){t.id&&a.push(t.id),t.children&&t.children.length&&e.getTreeNum(t.children,a)})),o=a.join(","),t.prev=15,e.loading=!0,t.next=19,Object(c["y"])({name:e.addRoleForm.name,remark:e.addRoleForm.remark,ids:o});case 19:i=t.sent,s=i.data,0!==s.code?e.$message.error(s.msg):(e.$router.go(-1),e._getLeftMenus(),e.loading=!1),t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](15),e.loading=!1;case 29:case"end":return t.stop()}}),t,null,[[15,25]])})))()},_getLeftMenus:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])();case 2:if(r=t.sent,n=r.data,0===n.code){t.next=7;break}return t.abrupt("return",e.$message.error("获取左侧菜单失败！"));case 7:e.menuslist=n.data.munuList;case 8:case"end":return t.stop()}}),t)})))()}}},d=u,m=(r("c081"),r("9ca4")),f=Object(m["a"])(d,n,a,!1,null,"5e2d1253",null);t["default"]=f.exports},"85e8":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return i}));var n=r("bdd0"),a=function(){return Object(n["a"])("get","/menu")},o=function(){return Object(n["a"])("post","/index")},i=function(){return Object(n["a"])("get","/logOut")}},8775:function(e,t,r){},a041:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("span",{staticClass:"title"},[e._t("title")],2),e._t("tag")],2)},a=[],o=(r("f343"),r("9ca4")),i={},s=Object(o["a"])(i,n,a,!1,null,"2a454133",null);t["a"]=s.exports},c081:function(e,t,r){"use strict";var n=r("055f"),a=r.n(n);a.a},f343:function(e,t,r){"use strict";var n=r("8775"),a=r.n(n);a.a}}]);