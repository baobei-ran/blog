(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-012b73c0"],{1799:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next",total:e.total,"page-size":e.per_page,"current-page":e.current_page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],i=(a("513c"),{props:{current_page:{type:Number,default:1},per_page:{type:Number,default:10},total:{type:Number,default:0}},methods:{handleSizeChange:function(e){this.$emit("handleSizeChangeSon",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChangeSon",e)}}}),o=i,l=a("9ca4"),s=Object(l["a"])(o,n,r,!1,null,null,null);t["a"]=s.exports},"528d":function(e,t,a){"use strict";var n=a("9b5a"),r=a.n(n);r.a},"942e":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l}));var n=a("bdd0"),r=function(e){return Object(n["a"])("post","/inquiryList",e)},i=function(e){return Object(n["a"])("post","/inquiryDetail",e)},o=function(e){return Object(n["a"])("post","/inquiryDocList",e)},l=function(e){return Object(n["a"])("post","/inquirySet",e)}},"9b5a":function(e,t,a){},fb47:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"onlineConsultationSet"},[a("el-card",{staticClass:"Mg-T20"},[a("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"医生姓名"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"医生职称"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}},e._l(e.gradelist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"所属科室"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.depName,callback:function(t){e.$set(e.form,"depName",t)},expression:"form.depName"}},e._l(e.deplist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"问诊状态"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statuslist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:""},on:{click:e.resetForm}},[e._v("重置")])],1)])],1)],1)],1),a("el-card",{staticClass:"Mg-T20"},[a("f-table",{attrs:{"table-label":e.tableLabel,"table-data":e.tableData},scopedSlots:e._u([{key:"allStatus",fn:function(t){return[1==t.data.is_open_inquiry?a("span",[e._v("已开通")]):a("span",[e._v("未开通")])]}},{key:"opt",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",plain:""},on:{click:function(a){return e.showEditDialog(t.data)}}},[e._v(" 编辑 ")])]}}])}),a("pagination",{attrs:{total:e.total,current_page:e.form.page,per_page:e.form.limit},on:{handleSizeChangeSon:e.handleSizeChangeFather,handleCurrentChangeSon:e.handleCurrentChangeFather}})],1),a("el-dialog",{attrs:{visible:e.editDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{ref:"editFormRef",attrs:{model:e.editForm,"label-width":"160px"}},[a("el-form-item",{staticClass:"isOpen",attrs:{label:"是否开启图文问诊"}},[a("span",{staticClass:"what",on:{mouseover:e.mouseOver,mouseleave:e.mouseLeave}}),a("el-radio-group",{staticClass:"Mg-L20",model:{value:e.editForm.openStatus,callback:function(t){e.$set(e.editForm,"openStatus",t)},expression:"editForm.openStatus"}},[a("el-radio",{attrs:{label:1}},[e._v("开通")]),a("el-radio",{attrs:{label:2}},[e._v("关闭")])],1),a("el-dialog",{staticClass:"bind-wx",attrs:{visible:e.TipsDialogVisible,"append-to-body":!0,width:"45%"},on:{"update:visible":function(t){e.TipsDialogVisible=t}}},[a("p",{staticClass:"title"},[e._v(" 服务开通后患者可以指名向医生购买问诊服务类型，医生接诊后根据问诊类型需要与患者进行沟通； ")]),a("p",[e._v(" 1、修改问诊模式后，将从患者的下一次咨询中生效； ")]),a("p",[e._v(" 2、设置付费问诊后，患者需付费后才能发起咨询； ")]),a("p",[e._v(" 3、医生主动发送消息不受限制，患者能否回复将根据您设定的问诊模式； ")]),a("p",[e._v(" 4、咨询收费价格请参考患者的病情及付费能力 ")]),a("p",[e._v(" 5、付费问诊默认有效期为每次24小时，患者支付后可在24小时内向您咨询，或经医患双方沟通由医生主动结束咨询； ")]),a("p",[e._v(" 6、患者购买问诊后，医生回复即表示接诊; ")])])],1),a("el-form-item",{attrs:{label:"问诊模式"}},[a("el-radio-group",{attrs:{disabled:1!==e.editForm.openStatus},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}},[a("el-radio",{attrs:{label:1}},[e._v("免费问诊")]),a("el-radio",{attrs:{label:2}},[e._v("付费问诊")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.editForm.openStatus&&2==e.editForm.type,expression:"editForm.openStatus == 1 && editForm.type == 2"}],attrs:{label:"问诊价格"}},[a("el-input",{directives:[{name:"price-number",rawName:"v-price-number"}],staticStyle:{width:"200px"},attrs:{clearable:""},on:{input:e.onChange},model:{value:e.editForm.price,callback:function(t){e.$set(e.editForm,"price",t)},expression:"editForm.price"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveOnlineConsultationSet}},[e._v(" 确 定 ")])],1)],1)],1)},r=[],i=(a("2eeb"),a("e35a"),a("f4e3"),a("6a61"),a("cf7f")),o=a("0748"),l=a("1799"),s=a("942e"),u={data:function(){return{form:{name:"",grade:"",depName:"",status:"",page:1,limit:10},gradelist:[],deplist:[],statuslist:[{id:"",name:"全部"},{id:1,name:"开通"},{id:2,name:"未开通"}],tableLabel:[{prop:"index",label:"序号"},{prop:"doc_name",label:"医生姓名"},{prop:"grade_name",label:"医生职称"},{prop:"dep_name",label:"所属科室"},{prop:"is_open_inquiry",label:"问诊状态",columnType:"slot",slotName:"allStatus"},{label:"操作",columnType:"slot",slotName:"opt"}],tableData:[],total:0,editDialogVisible:!1,editForm:{docNumber:"",openStatus:"",type:"",price:0},isclick:!1,TipsDialogVisible:!1}},components:{FTable:o["a"],Pagination:l["a"]},created:function(){this.getOnlineConsultationSet()},methods:{handleSearch:function(){this.form.page=1,this.getOnlineConsultationSet()},getOnlineConsultationSet:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["c"])(e.form);case 3:a=t.sent,n=a.data,0!==n.code?(e.tableData=[],e.total=0):(n.data.list.data.map((function(t,a){t.index=a+1+(e.form.page-1)*e.form.limit})),e.tableData=n.data.list.data,e.total=n.data.list.total,e.gradelist=n.data.grade,e.deplist=n.data.dep),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},resetForm:function(){this.$refs.form.resetFields(),this.form={name:"",grade:"",depName:"",status:"",page:1,limit:10},this.getOnlineConsultationSet()},handleSizeChangeFather:function(e){this.form.limit=e,this.getOnlineConsultationSet()},handleCurrentChangeFather:function(e){this.form.page=e,this.getOnlineConsultationSet()},showEditDialog:function(e){this.$isAuth("onlineSetEdit")&&(this.editForm={docNumber:e.doc_number,openStatus:e.is_open_inquiry,type:e.type,price:e.price},this.editDialogVisible=!0)},saveOnlineConsultationSet:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.editForm.openStatus){t.next=3;break}return e.$message.error("请选择是否开启图文问诊"),t.abrupt("return");case 3:if(1!=e.editForm.openStatus||e.editForm.type){t.next=6;break}return e.$message.error("请选择问诊模式"),t.abrupt("return");case 6:if(!(1==e.editForm.openStatus&&2==e.editForm.type&&e.editForm.price<=0)){t.next=9;break}return e.$message.error("付费问诊价格必须大于0"),t.abrupt("return");case 9:return a={docNumber:e.editForm.docNumber,openStatus:e.editForm.openStatus,type:e.editForm.type,price:1==e.editForm.type?0:e.editForm.price},t.prev=10,e.isclick=!1,t.next=14,Object(s["d"])(a);case 14:n=t.sent,r=n.data,0!==r.code?e.$message.error(r.msg):(e.$message.success("编辑问诊信息成功！"),e.getOnlineConsultationSet(),e.editDialogVisible=!1,e.isclick=!0),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](10);case 23:case"end":return t.stop()}}),t,null,[[10,20]])})))()},mouseOver:function(){this.TipsDialogVisible=!0},mouseLeave:function(){},onChange:function(){var e=this.editForm.price;e=e.match(/^\d*(\.?\d{0,2})/g)[0]||"",e&&1===e.length&&"."===e&&(e="0."),this.editForm.price=e}}},c=u,p=(a("528d"),a("9ca4")),d=Object(p["a"])(c,n,r,!1,null,"6b03d707",null);t["default"]=d.exports}}]);