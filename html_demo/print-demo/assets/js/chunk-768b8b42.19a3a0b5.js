(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-768b8b42"],{"11bc":function(t,e,n){"use strict";var r=n("e674"),i=n.n(r);i.a},1735:function(t,e,n){"use strict";n.d(e,"k",(function(){return i})),n.d(e,"h",(function(){return a})),n.d(e,"j",(function(){return s})),n.d(e,"i",(function(){return o})),n.d(e,"g",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return d})),n.d(e,"c",(function(){return m})),n.d(e,"l",(function(){return p})),n.d(e,"m",(function(){return h})),n.d(e,"a",(function(){return g}));var r=n("bdd0"),i=function(t){return Object(r["a"])("post","/articleClassIndex",t)},a=function(t){return Object(r["a"])("post","/articleClassAdd",t)},s=function(t){return Object(r["a"])("post","/articleClassEdit",t)},o=function(t){return Object(r["a"])("post","/articleClassDel",t)},c=function(t){return Object(r["a"])("post","/articleDetailIndex",t)},l=function(){return Object(r["a"])("get","/articleDetailAdd")},u=function(t){return Object(r["a"])("post","/articleDetailAdd",t)},f=function(t){return Object(r["a"])("get","/articleDetailEdit",t)},d=function(t){return Object(r["a"])("post","/articleDetailEdit",t)},m=function(t){return Object(r["a"])("post","/articleRecycle",t)},p=function(t){return Object(r["a"])("post","/articleRecycleIndex",t)},h=function(t){return Object(r["a"])("post","/articleRecycleRecover",t)},g=function(t){return Object(r["a"])("post","/articleRecycleDel",t)}},4562:function(t,e,n){},"4a09":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"articleEditPage"},[n("title-common",[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("编辑文章")])]),n("panel-common",[n("div",{attrs:{slot:"info-content"},slot:"info-content"},[n("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.formRules,"label-width":"100px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{attrs:{clearable:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"作者"}},[n("el-input",{attrs:{clearable:""},model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"所属分类","label-width":"100px"}},[n("el-select",{attrs:{placeholder:"全部"},model:{value:t.form.class_id,callback:function(e){t.$set(t.form,"class_id",e)},expression:"form.class_id"}},t._l(t.selectlist,(function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),n("el-row",[n("el-col",[n("el-form-item",{attrs:{label:"封面图片"}},[n("div",{staticClass:"upload-img"},[n("div",[n("ol",[t._l(t.hospitalPic3,(function(e,r){return n("li",{key:r+"_3"},[n("img",{attrs:{src:e.img,alt:""}}),n("p",[t._v("封面图片")]),n("span",{on:{click:function(n){return t.handleDelPic3(e.id)}}},[t._v("X")])])})),n("li",{directives:[{name:"show",rawName:"v-show",value:t.hospitalPic3.length<1,expression:"hospitalPic3.length < 1"}]},[n("input",{attrs:{type:"file",id:"signature3",accept:"image/jpeg, image/jpg, image/png"},on:{change:t.changePic3}}),n("label",{staticClass:"label-k",attrs:{for:"signature3"}}),n("p",{staticClass:"click"},[t._v("点击上传")]),n("p",[t._v("封面图片")])])],2)])])])],1)],1),n("el-row",[n("el-col",[n("el-form-item",{attrs:{label:"文章内容",prop:"content"}},[n("h-editor",{ref:"heditor",attrs:{catchData:t.changeText}})],1)],1)],1),n("el-row",{attrs:{type:"flex",align:"center"}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"排序号"}},[n("el-input",{attrs:{clearable:""},on:{input:function(e){return t.inputChange(e)}},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1),n("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:8}},[n("span",{staticClass:"number"},[t._v("请填写数字，数字越大越靠前")])])],1)],1)],1)]),n("div",{staticClass:"btns Mg-T20"},[n("el-button",{attrs:{plain:""},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),n("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:t.saveArticleEdit}},[t._v("保存")])],1)],1)},i=[],a=(n("dbb3"),n("2eeb"),n("e35a"),n("5e9f"),n("6a61"),n("cf7f")),s=n("a041"),o=n("2a94"),c=n("1735"),l=n("70a5"),u=n("5572"),f={data:function(){return{form:{title:"",author:"",class_id:"",content:"",sort:""},formRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入文章内容",trigger:"blur"}]},selectlist:[],hospitalPic3:[],isLoading:!1}},components:{TitleCommon:s["a"],PanelCommon:o["a"],HEditor:l["a"]},created:function(){this.id=this.$route.query.id,this.articleDefaultEdit()},methods:{articleDefaultEdit:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["e"])({id:t.id});case 2:n=e.sent,r=n.data,0!==r.code?t.$message.error(r.msg):(t.form=r.data.list,t.selectlist=r.data.select,r.data.list.title_img&&t.hospitalPic3.push({img:r.data.list.title_img}),t.$nextTick((function(){t.$refs.heditor.setHtml(t.form.content,2)})));case 6:case"end":return e.stop()}}),e)})))()},saveArticleEdit:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.form.title){e.next=3;break}return t.$message.error("请编辑标题！"),e.abrupt("return");case 3:if(t.form.content&&Object(u["g"])(t.form.content)){e.next=6;break}return t.$message.error("请编辑文章内容！"),e.abrupt("return");case 6:return t.isLoading=!0,n=new FormData,n.append("id",t.id),n.append("class_id",t.form.class_id),n.append("title",t.form.title),n.append("content",t.form.content),n.append("sort",t.form.sort),n.append("author",t.form.author),t.hospitalPic3.map((function(t){t.file&&n.append("file",t.file)})),e.next=18,Object(c["f"])(n);case 18:r=e.sent,i=r.data,0!==i.code?t.$message.error(i.msg):(t.$message.success("编辑文章成功！"),t.$router.go(-1)),t.isLoading=!1;case 23:case"end":return e.stop()}}),e)})))()},handleDelPic3:function(t){this.hospitalPic3=this.hospitalPic3.filter((function(e){return e.id!==t}))},changePic3:function(t){var e=t||window.event,n=e.target.files[0];if(n){var r=new FileReader;r.vue=this,r.readAsDataURL(n),r.onload=function(){var t={};t.id=1e4*Math.random(),t.img=this.result,t.file=n,this.vue.hospitalPic3.push(t)},e.target.value=""}},inputChange:function(t){t=t.replace(/[^0-9]/g,""),this.form.sort=t},changeText:function(t){this.form.content=t}}},d=f,m=(n("11bc"),n("9ca4")),p=Object(m["a"])(d,r,i,!1,null,"86ea3312",null);e["default"]=p.exports},6519:function(t,e,n){"use strict";var r=n("bfca"),i=n.n(r);i.a},"70a5":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wangeditor"},[n("div",{ref:"editorElem",class:{diagnose:t.is_ie10},staticStyle:{"text-align":"left",display:"inline-block"}})])},i=[],a=(n("9302"),n("e35a"),n("5e9f"),n("5572")),s={name:"wEditor",props:["catchData"],data:function(){return{editor:null,editorContent:"",hosExam_see:[],is_ie10:!1}},mounted:function(){var t=this,e=window.wangEditor;try{this.editor=new e(this.$refs.editorElem),this.editor.customConfig.onchange=function(e){if(t.editorContent=e,t.delHtmlTag(e)){var n=[];n.push(e),t.hosExam_see=n}else t.hosExam_see=[];t.catchData(t.editorContent)};var n=["fontName","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","undo","redo"];this.editor.customConfig.menus=n,this.editor.create()}catch(r){}},methods:{delHtmlTag:function(t){return!!t&&t.replace(/<[^>]+>/g,"").replace(/&nbsp;/gi,"")},setHtml:function(t,e){if(t)if(t=Object(a["d"])(t),1==e)if(this.hosExam_see.length){this.hosExam_see.push(t);var n=this.hosExam_see.join("<p></p><br/>");this.editor.txt.html(n+"<p></p>"),this.catchData(n)}else{this.hosExam_see.push(t);n=this.hosExam_see.join("");this.editor.txt.html(n+"<p></p>"),this.catchData(n)}else if(this.$IE10)this.hosExam_see.push(t),this.editor.txt.html(t),this.catchData(t);else{var r=t;this.hosExam_see.push(r),this.editor.txt.html(r+"<p></p>"),this.catchData(r)}}}},o=s,c=(n("6519"),n("e1cc"),n("9ca4")),l=Object(c["a"])(o,r,i,!1,null,"6884893e",null);e["a"]=l.exports},8775:function(t,e,n){},a041:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"title"},[t._t("title")],2),t._t("tag")],2)},i=[],a=(n("f343"),n("9ca4")),s={},o=Object(a["a"])(s,r,i,!1,null,"2a454133",null);e["a"]=o.exports},bfca:function(t,e,n){},e1cc:function(t,e,n){"use strict";var r=n("4562"),i=n.n(r);i.a},e674:function(t,e,n){},f343:function(t,e,n){"use strict";var r=n("8775"),i=n.n(r);i.a}}]);